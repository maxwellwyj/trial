import{X as x,b as h,Y as k,o as I,Z as b,g as l,e as f,a as $,L as A,_ as T,$ as E,a0 as L,M as P,A as V,x as S,y as w,j as s,a1 as z,w as j,a2 as U,a3 as y,a4 as C,a5 as H}from"./index-CZK4eSiU.js";/* empty css             *//* empty css                *//* empty css                   *//* empty css                 *//* empty css                    *//* empty css               */import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N=d=>(S("data-v-d61108dc"),d=d(),w(),d),O={class:"testarea"},R=N(()=>s("div",{class:"centered-text"},[s("p",null,"轨头综合磨损情况")],-1)),X=x({__name:"itemTwo",setup(d){const u=h([]);async function i(){var c;try{const o=await $.get("http://localhost:5173/map/case2data.json"),e=((c=o==null?void 0:o.data)==null?void 0:c.data)??[];Array.isArray(e)?(u.value=t(e),console.log("数据加载成功：",u.value)):console.error("服务器返回的数据不是一个有效的数组:",e)}catch(o){console.error("加载数据时出错：",o)}}function t(c){const o=[];for(const e of c){const n={position:e.position,wearLevel:e.wearLevel,damageDegree:e.damageDegree};o.push(n)}return o}return k(()=>{i()}),(c,o)=>{const e=A,n=T,D=E,_=L,r=P,v=V;return I(),b("div",O,[l(v,{class:"container"},{default:f(()=>[l(e,{class:"header"},{default:f(()=>[R]),_:1}),l(r,{class:"main"},{default:f(()=>[l(_,null,{default:f(()=>[l(D,{data:u.value},{default:f(()=>[l(n,{prop:"position",label:"Position"}),l(n,{prop:"wearLevel",label:"Wear Level"}),l(n,{prop:"damageDegree",label:"Damage Degree"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}}}),Y=W(X,[["__scopeId","data-v-d61108dc"]]),Z=d=>(S("data-v-c1697331"),d=d(),w(),d),q={class:"testarea"},F=Z(()=>s("div",{class:"centered-text"},[s("p",null,"轨道表面裂纹情况")],-1)),G=x({__name:"itemThree",setup(d){const u=h([]);async function i(){var c;try{const o=await $.get("http://localhost:5173/map/case1data.json"),e=((c=o==null?void 0:o.data)==null?void 0:c.data)??[];Array.isArray(e)?(u.value=t(e),console.log("数据加载成功：",u.value)):console.error("服务器返回的数据不是一个有效的数组:",e)}catch(o){console.error("加载数据时出错：",o)}}function t(c){const o=[];for(const e of c){const n={position:e.position,crackSize:e.crackSize,damageLevel:e.damageLevel};o.push(n)}return o}return k(()=>{i()}),(c,o)=>{const e=A,n=T,D=E,_=L,r=P,v=V;return I(),b("div",q,[l(v,{class:"container"},{default:f(()=>[l(e,{class:"header"},{default:f(()=>[F]),_:1}),l(r,{class:"main"},{default:f(()=>[l(_,null,{default:f(()=>[l(D,{data:u.value},{default:f(()=>[l(n,{prop:"position",label:"Position"}),l(n,{prop:"crackSize",label:"Crack Size"}),l(n,{prop:"damageLevel",label:"Damage Level"})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})])}}}),J=W(G,[["__scopeId","data-v-c1697331"]]),B=d=>(S("data-v-7e7cae3e"),d=d(),w(),d),K=B(()=>s("div",{class:"itemChart",id:"itemChart"},null,-1)),Q=B(()=>s("div",{class:"totalCrackChart",id:"totalCrackChart"},null,-1)),ee=[K,Q],te=x({__name:"itemPage",props:{selectedData:{}},setup(d){const u=z("echarts"),i=d,t=h(i.selectedData);j(()=>i.selectedData,e=>{t.value=e,t.value?(console.log("数据导入成功"),console.log(t.value)):console.log("数据导入失败"),c(),o()},{deep:!0});function c(){const e=t.value.measurements.map(r=>r.position),n=t.value.measurements.map(r=>r.surfaceCrack),D=t.value.measurements.map(r=>r.railheadWear),_=u.init(document.getElementById("itemChart"));console.log(t.value),_.setOption({tooltip:{trigger:"axis",formatter:r=>{const v=r[0].dataIndex,g=e[v],p=n[v],a=D[v];return`位置：${g}<br>表面裂纹：${p}<br>轨头磨损：${a}`}},xAxis:{type:"category",data:e.map(String)},yAxis:{type:"value"},series:[{data:n,type:"line",name:"表面裂纹"}]})}function o(){if(!t.value)return;const e=t.value.measurements.map(_=>_.position);console.log(t.value);const n=t.value.measurements.map(_=>_.surfaceWear);u.init(document.getElementById("totalCrackChart")).setOption({tooltip:{trigger:"axis",formatter:_=>{const r=_[0].dataIndex,v=t.value.measurements[r].position,g=t.value.measurements[r].surfaceWear;return`位置：${v}<br>表面总磨损度：${g}`}},xAxis:{type:"category",data:e.map(String)},yAxis:{type:"value"},series:[{data:n,type:"line",name:"表面总磨损度"}]})}return U("selectedData",t),k(()=>{t.value&&(console.log("数据导入成功"),console.log(t.value)),c(),o()}),(e,n)=>(I(),b("div",null,ee))}}),ae=W(te,[["__scopeId","data-v-7e7cae3e"]]),oe={class:"charts"},se={class:"containter"},ne={class:"itemleft"},le={class:"dateSelector"},ce=s("label",{for:"datePicker"},"选择日期：",-1),re={class:"search"},ie={class:"positionInput"},de=s("label",{for:"positionInput"},"位置：",-1),ue={class:"selectedData"},pe=s("label",{for:"surfaceCrackData"},"表面裂纹数据：",-1),me=s("label",{for:"trackWearData"},"轨头磨损数据：",-1),_e={class:"itemcenter"},ve={class:"itemright"},Ie=x({__name:"HomepageManage",setup(d){const u=h([]),i=h(""),t=h({selectedDate:"",measurements:[]}),c=h(0),o=h(0),e=h(0);async function n(){var p;try{const a=await $.get("http://localhost:5173/map/mapdata.json"),m=((p=a==null?void 0:a.data)==null?void 0:p.data)??[];Array.isArray(m)?(u.value=D(m),console.log("数据加载成功：",u.value),u.value.length>0&&(i.value=u.value[0].date,r())):console.error("服务器返回的数据不是一个有效的数组:",m)}catch(a){console.error("加载数据时出错：",a)}}function D(p){const a=[];for(const m of p){const M={date:m.date,measurements:m.measurements};a.push(M)}return a}function _(p){for(const a of u.value)if(a.date===p)return a;return null}function r(){const p=_(i.value);p?(t.value.measurements=[...p.measurements],t.value.selectedDate=i.value,v()):(t.value.measurements=[],t.value.selectedDate="")}k(()=>{n()}),j(i,()=>{r()});function v(){const p=parseInt(c.value.toString(),10),a=t.value.measurements.find(m=>m.position===p);a?(o.value=a.surfaceCrack,e.value=a.railheadWear):(o.value=0,e.value=0)}function g(p){const a=p.target.value;i.value=a,t.value.selectedDate=i.value,console.log("选择的日期：",i.value),r(),H(()=>{console.log(t.value)})}return(p,a)=>(I(),b("div",null,[s("section",oe,[l(ae,{selectedData:t.value},null,8,["selectedData"])]),s("section",se,[s("section",ne,[s("div",null,[s("div",le,[ce,y(s("input",{type:"date",id:"datePicker","onUpdate:modelValue":a[0]||(a[0]=m=>i.value=m),onInput:g},null,544),[[C,i.value]])]),s("div",re,[s("div",ie,[de,y(s("input",{type:"text",id:"positionInput","onUpdate:modelValue":a[1]||(a[1]=m=>c.value=m),onInput:v},null,544),[[C,c.value]])])]),s("div",ue,[s("div",null,[pe,y(s("input",{type:"text",id:"surfaceCrackData","onUpdate:modelValue":a[2]||(a[2]=m=>o.value=m),readonly:""},null,512),[[C,o.value]])]),s("div",null,[me,y(s("input",{type:"text",id:"trackWearData","onUpdate:modelValue":a[3]||(a[3]=m=>e.value=m),readonly:""},null,512),[[C,e.value]])])])])]),s("section",_e,[l(Y)]),s("section",ve,[l(J,{selectedDate:i.value},null,8,["selectedDate"])])])]))}});export{Ie as default};
